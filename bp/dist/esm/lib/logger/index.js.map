{"version":3,"sources":["../../../../src/lib/logger/pino.logger.ts","../../../../src/lib/logger/index.ts"],"sourcesContent":["import {\n  pino,\n  type Logger as PinoLoggerImpl,\n  type DestinationStream,\n} from \"pino\";\nimport { type LOG_LEVELS, type Logger } from \"./definition\";\n\nexport default class PinoLogger implements Logger {\n  readonly #logger: PinoLoggerImpl;\n\n  constructor(\n    private readonly level: LOG_LEVELS,\n    private readonly prettyPrintEnabled: boolean,\n    private readonly destStream?: DestinationStream | string,\n  ) {\n    this.#logger = pino({\n      level,\n      transport: prettyPrintEnabled\n        ? {\n            target: \"pino-pretty\",\n            options: {\n              colorize: true,\n              sync: true,\n            },\n          }\n        : undefined,\n    });\n  }\n\n  debug(message: string, metadata?: Record<string, unknown>): void {\n    if (metadata) {\n      this.#logger.debug(metadata, message);\n    } else {\n      this.#logger.debug(message);\n    }\n  }\n\n  error(message: string, metadata?: Record<string, unknown>): void {\n    if (metadata) {\n      this.#logger.error(metadata, message);\n    } else {\n      this.#logger.error(message);\n    }\n  }\n\n  info(message: string, metadata?: Record<string, unknown>): void {\n    if (metadata) {\n      this.#logger.info(metadata, message);\n    } else {\n      this.#logger.info(message);\n    }\n  }\n\n  warning(message: string, metadata?: Record<string, unknown>): void {\n    if (metadata) {\n      this.#logger.warn(metadata, message);\n    } else {\n      this.#logger.warn(message);\n    }\n  }\n}\n","import { type Logger, type LoggerConfiguration } from \"./definition\";\nimport PinoLogger from \"./pino.logger\";\nimport { metricsExporter } from \"../error-handeling\";\n\nexport class LoggerWrapper implements Logger {\n  // @ts-expect-error description: 'abcd'\n  #underlyingLogger: Logger | undefined = null;\n\n  configureLogger(\n    configuration: Partial<LoggerConfiguration>,\n    overrideIfExists = true,\n  ): void {\n    if (this.#underlyingLogger === null || overrideIfExists) {\n      this.#underlyingLogger = new PinoLogger(\n        configuration.level ?? \"info\",\n        configuration.prettyPrint ?? false,\n      );\n    }\n  }\n\n  resetLogger() {\n    // @ts-expect-error description: 'abcd'\n    this.#underlyingLogger = null;\n  }\n\n  debug(message: string, metadata?: Record<string, unknown>): void {\n    this.#getInitializeLogger().debug(message);\n  }\n\n  error(message: string, metadata?: Record<string, unknown>): void {\n    this.#getInitializeLogger().error(message);\n  }\n\n  info(message: string, metadata?: Record<string, unknown>): void {\n    // If never initialized, the set default configuration\n    this.#getInitializeLogger().info(message);\n  }\n\n  warning(message: string, metadata?: Record<string, unknown>): void {\n    this.#getInitializeLogger().warning(message);\n  }\n\n  #getInitializeLogger(): Logger {\n    this.configureLogger({ prettyPrint: true }, false);\n\n    return this.#underlyingLogger!;\n  }\n}\n\nexport const logger = new LoggerWrapper();\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA,EACE;AAAA,OAGK;AAJP;AAOA,IAAqB,aAArB,MAAkD;AAAA,EAGhD,YACmB,OACA,oBACA,YACjB;AAHiB;AACA;AACA;AALnB,uBAAS,SAAT;AAOE,uBAAK,SAAU,KAAK;AAAA,MAClB;AAAA,MACA,WAAW,qBACP;AAAA,QACE,QAAQ;AAAA,QACR,SAAS;AAAA,UACP,UAAU;AAAA,UACV,MAAM;AAAA,QACR;AAAA,MACF,IACA;AAAA,IACN,CAAC;AAAA,EACH;AAAA,EAEA,MAAM,SAAiB,UAA0C;AAC/D,QAAI,UAAU;AACZ,yBAAK,SAAQ,MAAM,UAAU,OAAO;AAAA,IACtC,OAAO;AACL,yBAAK,SAAQ,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,MAAM,SAAiB,UAA0C;AAC/D,QAAI,UAAU;AACZ,yBAAK,SAAQ,MAAM,UAAU,OAAO;AAAA,IACtC,OAAO;AACL,yBAAK,SAAQ,MAAM,OAAO;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,KAAK,SAAiB,UAA0C;AAC9D,QAAI,UAAU;AACZ,yBAAK,SAAQ,KAAK,UAAU,OAAO;AAAA,IACrC,OAAO;AACL,yBAAK,SAAQ,KAAK,OAAO;AAAA,IAC3B;AAAA,EACF;AAAA,EAEA,QAAQ,SAAiB,UAA0C;AACjE,QAAI,UAAU;AACZ,yBAAK,SAAQ,KAAK,UAAU,OAAO;AAAA,IACrC,OAAO;AACL,yBAAK,SAAQ,KAAK,OAAO;AAAA,IAC3B;AAAA,EACF;AACF;AApDW;;;ACRX;AAIO,IAAM,gBAAN,MAAsC;AAAA,EAAtC;AAsCL;AApCA;AAAA,0CAAwC;AAAA;AAAA,EAExC,gBACE,eACA,mBAAmB,MACb;AAXV;AAYI,QAAI,mBAAK,uBAAsB,QAAQ,kBAAkB;AACvD,yBAAK,mBAAoB,IAAI;AAAA,SAC3B,mBAAc,UAAd,YAAuB;AAAA,SACvB,mBAAc,gBAAd,YAA6B;AAAA,MAC/B;AAAA,IACF;AAAA,EACF;AAAA,EAEA,cAAc;AAEZ,uBAAK,mBAAoB;AAAA,EAC3B;AAAA,EAEA,MAAM,SAAiB,UAA0C;AAC/D,0BAAK,8CAAL,WAA4B,MAAM,OAAO;AAAA,EAC3C;AAAA,EAEA,MAAM,SAAiB,UAA0C;AAC/D,0BAAK,8CAAL,WAA4B,MAAM,OAAO;AAAA,EAC3C;AAAA,EAEA,KAAK,SAAiB,UAA0C;AAE9D,0BAAK,8CAAL,WAA4B,KAAK,OAAO;AAAA,EAC1C;AAAA,EAEA,QAAQ,SAAiB,UAA0C;AACjE,0BAAK,8CAAL,WAA4B,QAAQ,OAAO;AAAA,EAC7C;AAOF;AAzCE;AAoCA;AAAA,yBAAoB,WAAW;AAC7B,OAAK,gBAAgB,EAAE,aAAa,KAAK,GAAG,KAAK;AAEjD,SAAO,mBAAK;AACd;AAGK,IAAM,SAAS,IAAI,cAAc;","names":[]}